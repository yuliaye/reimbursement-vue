(function(t){function e(e){for(var a,i,o=e[0],u=e[1],l=e[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);c&&c(e);while(m.length)m.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var u=n[o];0!==r[u]&&(a=!1)}a&&(s.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},r={app:0},s=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/reimbursement-vue/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var c=u;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"022b":function(t,e,n){},"199c":function(t,e){},"1d8f":function(t,e,n){"use strict";n("b4dd")},"23be":function(t,e,n){"use strict";var a=n("199c"),r=n.n(a);e["default"]=r.a},"2ab5":function(t,e,n){},"3de1":function(t,e,n){},"3dfd":function(t,e,n){"use strict";var a=n("65f1"),r=n("23be"),s=n("2877"),i=Object(s["a"])(r["default"],a["a"],a["b"],!1,null,"1f337551",null);e["default"]=i.exports},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=n("3dfd"),s=n("8c4f"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box"},[n("div",{staticClass:"topic"},[t._v(" Reimbursement ")]),n("div",{staticClass:"body"},[n("div",{staticClass:"login"},[t._v("Sign in")]),t.message?n("el-alert",{attrs:{type:"error",closable:!1,title:t.message}}):t._e(),n("div",{staticClass:"form-container"},[n("div",{staticClass:"form-group"},[t._v(" Email "),n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.emailInput,callback:function(e){t.emailInput=e},expression:"emailInput"}})],1),n("div",{staticClass:"form-group"},[t._v(" Password "),n("el-input",{attrs:{placeholder:"请输入内容","show-password":""},model:{value:t.passwordInput,callback:function(e){t.passwordInput=e},expression:"passwordInput"}})],1),n("div",{staticClass:"form-group"},[n("el-checkbox",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("Remember me")])],1),n("el-button",{attrs:{type:"primary"},on:{click:t.loginButton}},[t._v("Sign in")])],1)],1)])},o=[],u={data:function(){return{emailInput:"",passwordInput:"",message:"",checked:!1}},methods:{loginButton:function(){this.emailInput||this.passwordInput?(this.$store.state.isLogin=!0,this.$router.push({path:"/reimbursements"}),this.$store.state.accountName=this.emailInput,this.checked?(this.$store.state.accountName=this.emailInput,localStorage.setItem("accountName",this.emailInput)):(this.$store.state.accountName=this.emailInput,sessionStorage.setItem("accountName",this.emailInput))):this.message="请输入账号和密码"}}},l=u,c=(n("6c9e"),n("2877")),d=Object(c["a"])(l,i,o,!1,null,"19c773d9",null),m=d.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("topicsiderbar"),n("el-container",[n("el-header"),n("el-container",[n("el-main",[n("div",{staticClass:"myreimbursements"},[t._v(" My Reimbursements ")]),n("div",{staticClass:"topicButton"},[n("div",[n("el-input",{staticStyle:{width:"180px","margin-right":"15px"},attrs:{placeholder:"请输入搜索内容"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1),n("el-pagination",{attrs:{"hide-on-single-page":"",background:"",layout:"prev, pager, next","page-size":t.pageSize,total:t.tableData.length,"current-page":t.currentPage},on:{"current-change":t.handlePaginate,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1),n("div",[n("el-table",{staticClass:"table",attrs:{data:t.tableData.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),stripe:!0,"default-sort":t.defaultSort},on:{"sort-change":t.sortChange,"filter-change":t.filterChange}},[n("el-table-column",{attrs:{prop:"sumbmitted_at",label:"Submit Date",sortable:"custom"}}),n("el-table-column",{attrs:{prop:"amount",label:"Amount",sortable:"custom"}}),n("el-table-column",{attrs:{prop:"subject_count",label:"Count",sortable:"custom"}}),n("el-table-column",{attrs:{prop:"status",label:"Status","column-key":"status",filters:t.statusFilters}}),n("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{placement:"right",width:"350",trigger:"click"}},[n("el-table",{attrs:{data:e.row.items}},[n("el-table-column",{attrs:{width:"130",prop:"date",label:"Date"}}),n("el-table-column",{attrs:{width:"100",prop:"amount",label:"Amount"}}),n("el-table-column",{attrs:{width:"100",prop:"usage",label:"usage"}}),n("el-table-column",{attrs:{width:"100",prop:"people_numbers",label:"People"}}),n("el-table-column",{attrs:{width:"100",prop:"description",label:"Description"}})],1),n("button",{attrs:{slot:"reference"},slot:"reference"},[t._v("Review Detail")])],1),"pending"===e.row.status?[n("button",{on:{click:function(n){return t.toEdit(e.row.id)}}},[t._v("Edit")]),n("button",{on:{click:function(n){return t.deleteButton(e.row.id)}}},[t._v("Delete")])]:t._e()]}}])})],1)],1)]),n("el-aside",{attrs:{width:"180px"}},[n("Siderbar")],1)],1)],1)],1)},b=[],f=(n("a4d3"),n("e01a"),n("4de4"),n("caad"),n("45fc"),n("2532"),n("2ef0")),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"topicNavigation"},[n("div",{staticClass:"topicAccount"},[n("span",{staticClass:"span1"},[t._v("ReimbVue")]),n("span",{staticClass:"span2"},[n("router-link",{attrs:{to:"/reimbursements"}},[t._v("Reimbursements")])],1),n("span",{staticClass:"span3"},[t._v("Holiday")])]),n("div",{staticClass:"account"},[t.$store.state.isLogin?t._e():n("router-link",{attrs:{to:"/login"}},[n("el-button",{attrs:{type:"text"}},[t._v("login")])],1),t.$store.state.isLogin?n("el-dropdown",[n("span",{staticClass:"el-dropdown-link"},[t._v(" "+t._s(t.$store.state.accountName)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[t._v("Profile")]),n("el-dropdown-item",[t._v("Account Settings")]),n("el-dropdown-item",{nativeOn:{click:function(e){return t.logOut(e)}}},[t._v("Log out")])],1)],1):t._e()],1)])},g=[],v={methods:{logOut:function(){var t=this;this.$store.dispatch("logout").then((function(){t.$router.push({path:"/login"})}))}}},_=v,w=(n("c13c"),Object(c["a"])(_,h,g,!1,null,"a873bcb2",null)),y=w.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{staticClass:"tac"},[n("el-col",{attrs:{span:20}},[n("el-menu",{attrs:{"default-active":t.$route.path,router:!0}},[n("el-menu-item",{attrs:{index:"1"}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("LIST HEADER")])]),n("el-menu-item",{attrs:{index:"/reimbursements"}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("My Reimbursements")])]),n("el-menu-item",{attrs:{index:"/reimbursements/new"}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("Add Reimbursements")])]),n("el-divider",{staticClass:"divider"}),n("el-menu-item",{staticClass:"spanhelp",attrs:{index:"4"}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("Help")])])],1)],1)],1)],1)},S=[],C={},I=C,k=(n("e45e"),Object(c["a"])(I,x,S,!1,null,"4ca6e4a8",null)),$=k.exports,O={data:function(){return{pageSize:2,currentPage:1,defaultSort:{prop:"sumbmitted_at",order:"descending"},currentSort:null,statusFilters:[{text:"pending",value:"pending"},{text:"paid",value:"paid"}],currentFilters:null,input:""}},components:{topicsiderbar:y,Siderbar:$},computed:{tableData:function(){var t=this,e=this.$store.state.tableData;if(this.currentFilters){var n=function(n){var a=t.currentFilters[n];a.length>0&&(e=e.filter((function(t){return a.includes(t[n])})))};for(var a in this.currentFilters)n(a)}""!==this.input&&(e=e.filter((function(e){return e.items.some((function(e){return e.description.includes(t.input)}))})));var r=this.currentSort||this.defaultSort,s=r.prop,i=r.order;return Object(f["orderBy"])(e,s,"ascending"===i?"asc":"desc")}},methods:{toEdit:function(t){this.$router.push({path:"/reimbursements/edit",query:{id:t}})},deleteButton:function(t){this.$store.commit("deleteItem",t)},filterChange:function(t){this.currentPage=1,this.currentFilters=t},handlePaginate:function(t){this.currentPage=t},sortChange:function(t){t.column;var e=t.prop,n=t.order;this.currentPage=1,this.currentSort=n?{prop:e,order:n}:null},backLogin:function(){this.$router.push({path:"/login"})}}},D=O,j=(n("eca3"),Object(c["a"])(D,p,b,!1,null,"0fe849ae",null)),P=j.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("topicsiderbar"),n("el-container",[n("el-header"),n("el-container",[n("el-main",[n("ReimbursementForm",{attrs:{title:"Add Reimbursements"},on:{submit:t.addReb}})],1),n("el-aside",{attrs:{width:"180px"}},[n("Siderbar")],1)],1)],1)],1)},E=[],F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"add-reimbursements"},[n("b",{domProps:{textContent:t._s(t.title)}})]),t._l(t.list,(function(e,a){return n("el-form",{key:a,ref:"forms",refInFor:!0,attrs:{"label-width":"80px",rules:t.rules,model:e}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("div",{staticClass:"grid-content"},[n("el-form-item",{attrs:{label:"Date",prop:"date"}},[n("el-col",[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.date,callback:function(n){t.$set(e,"date",n)},expression:"item.date"}})],1)],1)],1)]),n("el-col",{attrs:{span:4}},[n("div",{staticClass:"grid-content"},[n("el-form-item",{attrs:{label:"Usage",prop:"usage"}},[n("el-select",{model:{value:e.usage,callback:function(n){t.$set(e,"usage",n)},expression:"item.usage"}},t._l(t.usageOptions,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)],1)]),n("el-col",{attrs:{span:4}},[n("div",{staticClass:"grid-content"},[n("el-form-item",{staticClass:"amount-item",attrs:{label:"Amount",prop:"amount"}},[n("el-input",{attrs:{placeholder:"0.0"},model:{value:e.amount,callback:function(n){t.$set(e,"amount",t._n(n))},expression:"item.amount"}}),n("span",[t._v("RMB")])],1)],1)]),n("el-col",{attrs:{span:4}},[n("div",{staticClass:"grid-content"},[n("el-form-item",{attrs:{label:"People",prop:"people_numbers"}},[n("el-select",{model:{value:e.people_numbers,callback:function(n){t.$set(e,"people_numbers",t._n(n))},expression:"item.people_numbers"}},t._l(t.peopleNumber,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)],1)]),n("el-col",{attrs:{span:6}},[n("el-button",{attrs:{type:"text"},on:{click:function(e){return t.removeButton(a)}}},[t._v("Remove")])],1)],1),n("el-row",{staticClass:"activeName",attrs:{gutter:20}},[n("el-col",{attrs:{span:16}},[n("el-form-item",{attrs:{label:"Description"}},[n("el-input",{attrs:{placeholder:"Please add description here..."},model:{value:e.description,callback:function(n){t.$set(e,"description",n)},expression:"item.description"}})],1)],1)],1)],1)})),n("div",{staticClass:"all-button"},[n("button",{staticClass:"add-button",on:{click:t.addItem}},[t._v("Add Another Day")]),n("div",{staticClass:"submit-cancle"},[n("el-button",{attrs:{type:"success"},on:{click:t.submitForm}},[t._v("Submit")]),n("el-button",{on:{click:t.cancleButton}},[t._v("Cancle")])],1)])],2)},N=[],L=(n("a623"),n("7db0"),n("4160"),n("d81d"),n("a434"),n("d3b7"),n("25f0"),n("159b"),n("2909")),B=n("5530"),A={usage:"",date:"",amount:"",people_numbers:"",description:""},M={data:function(){return{usageOptions:["Lunch","Dinner","Taxi","Other"],peopleNumber:20,list:this.defaultList,rules:{date:[{required:!0,message:"请选择日期",trigger:["change","blur"]}],usage:[{required:!0,message:"请选择内容",trigger:"change"}],amount:[{required:!0,message:"请输入金额",trigger:["change","blur"]},{type:"number",min:0,message:"金额要大于0",trigger:["change","blur"]}],people:[{type:"number",required:!0,message:"请选择人数",trigger:"change"}]}}},props:{title:String,reimbursementId:String,defaultList:{type:Array,default:function(){return[Object(B["a"])({},A)]}}},methods:{addItem:function(){this.list.push(Object(B["a"])({},A))},removeButton:function(t){this.list.splice(t,1)},cancleButton:function(){this.$router.go(-1)},submitForm:function(){var t=this.$refs.forms.map((function(t){var e=!1;return t.validate((function(t){e=t})),e}));if(!t.every((function(t){return t})))return!1;var e=new Date,n=e.getFullYear()+"-"+e.getMonth()+"1-"+e.getDate(),a=0;this.list.forEach((function(t){t.amount&&(a+=parseInt(t.amount))}));var r={id:this.reimbursementId||Math.random().toString(36).substr(3,5),sumbmitted_at:n,amount:a,subject_count:this.list.length,status:"pending",items:Object(L["a"])(this.list)};this.$emit("submit",r)}},created:function(){var t=this;if(this.reimbursementId){var e=this.$store.state.tableData.find((function(e){return e.id===t.reimbursementId}));e&&(this.list=e.items)}}},T=M,q=(n("720b"),n("1d8f"),Object(c["a"])(T,F,N,!1,null,"60f31123",null)),z=q.exports,H={components:{topicsiderbar:y,Siderbar:$,ReimbursementForm:z},methods:{addReb:function(t){this.$store.commit("reimbursementDatas",t),this.$router.push({path:"/reimbursements"})}}},J=H,U=Object(c["a"])(J,R,E,!1,null,null,null),V=U.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("topicsiderbar"),n("el-container",[n("el-header"),n("el-container",[n("el-main",[n("ReimbursementForm",{attrs:{title:"Edit Reimbursements",reimbursementId:t.$route.query.id},on:{submit:t.editReb}})],1),n("el-aside",{attrs:{width:"180px"}},[n("Siderbar")],1)],1)],1)],1)},G=[],K={components:{topicsiderbar:y,Siderbar:$,ReimbursementForm:z},methods:{editReb:function(t){this.$store.commit("editReimbursementDatas",t),this.$router.push({path:"/reimbursements"})}}},Q=K,W=(n("f478"),n("db58"),Object(c["a"])(Q,Y,G,!1,null,"5874f028",null)),X=W.exports,Z=(n("c740"),n("2f62"));a["default"].use(Z["a"]);var tt=localStorage.getItem("accountName")||sessionStorage.getItem("accountName"),et=Boolean(tt),nt=new Z["a"].Store({state:{isLogin:et,accountName:tt,tableData:[{id:"1",sumbmitted_at:"2016-05-02",amount:"111",subject_count:"2",status:"pending",items:[{date:"2016-05-02",amount:111,usage:"Lunch",people_numbers:2,description:"I am Test,狗子"},{date:"2016-05-20",amount:112,usage:"Lunch",people_numbers:1,description:"I am Test"}]},{id:"2",sumbmitted_at:"2017-05-02",amount:"222",subject_count:"3",status:"paid",items:[{date:"2017-05-02",amount:435,usage:"Dinner",people_numbers:4,description:"I am String"}]},{id:"3",sumbmitted_at:"2018-05-02",amount:"333",subject_count:"2",status:"pending",items:[{date:"2018-05-02",amount:45,usage:"Taxi",people_numbers:1,description:"I am test"}]},{id:"4",sumbmitted_at:"2019-05-02",amount:"444",subject_count:"3",status:"pending",items:[{date:"2019-05-02",amount:99,usage:"Other",people_numbers:1,description:"I am String"}]}]},mutations:{reimbursementDatas:function(t,e){t.tableData.push(e)},deleteItem:function(t,e){t.tableData=t.tableData.filter((function(t){return t.id!==e}))},editReimbursementDatas:function(t,e){var n=t.tableData.findIndex((function(t){var n=t.id;return n===e.id}));n&&(t.tableData[n]=e)}},actions:{logout:function(t){var e=t.state;return new Promise((function(t,n){e.isLogin=!1,localStorage.removeItem("accountName"),sessionStorage.removeItem("accountName"),t()}))}},modules:{}});a["default"].use(s["a"]);var at=new s["a"]({mode:"history",routes:[{path:"/login",component:m},{path:"/reimbursements",component:P},{path:"/reimbursements/new",component:V},{path:"/reimbursements/edit",component:X},{path:"",redirect:"/login"}]});at.beforeEach((function(t,e,n){var a=nt.state.isLogin;if("/login"===t.path){if(a)return!1;n()}else a?n():n("/login")}));var rt=at,st=n("5c96"),it=n.n(st);n("0fae");a["default"].config.productionTip=!1,a["default"].use(it.a),new a["default"]({router:rt,store:nt,render:function(t){return t(r["default"])}}).$mount("#app")},"65f1":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return r}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[]},"69fa":function(t,e,n){},"6c9e":function(t,e,n){"use strict";n("022b")},"720b":function(t,e,n){"use strict";n("2ab5")},"853f":function(t,e,n){},a9c4:function(t,e,n){},b4dd:function(t,e,n){},b60b:function(t,e,n){},c13c:function(t,e,n){"use strict";n("853f")},db58:function(t,e,n){"use strict";n("a9c4")},e45e:function(t,e,n){"use strict";n("69fa")},eca3:function(t,e,n){"use strict";n("b60b")},f478:function(t,e,n){"use strict";n("3de1")}});
//# sourceMappingURL=app.b1524502.js.map